<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700">
<link rel="stylesheet" href="@Url.Content("~/Newassets/plugins/global/plugins.bundle.css")">
<link rel="stylesheet" href="@Url.Content("~/Newassets/plugins/custom/datatables/datatables.bundle.css")">

<link rel="stylesheet" href="@Url.Content("~/assets/css/blog/grid-v2.css")" />
<link rel="stylesheet" href="@Url.Content("~/assets/css/ztyle.bundle.css")" />

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

<!-- Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

@model Hackathon.Application.UI.Models.MatterDetails

<!--begin::Timeline-->
<div class="card">
    <!--begin::Card body-->
    <div class="card-body">
        <!--begin::Tab Content-->
        <div class="tab-content">
            <!--begin::Tab panel-->
            <div id="kt_activity_today" class="card-body p-0 tab-pane fade show active" role="tabpanel" aria-labelledby="kt_activity_today_tab">
                <!--begin::Timeline-->
                <div class="timeline timeline-border-dashed">
                    <div class="overflow-auto pb-5">
                        <!--begin::Record-->
                        <div class="card mb-5 mb-xl-12">
                            <!--begin::Header-->
                            <div class="card-header border-0 pt-5">
                                <h4 class="card-title align-items-start flex-column">
                                    <!--begin::Title-->
                                    <div class="card-title d-flex align-items-center">
                                        <i class="ki-duotone ki-calendar-8 fs-1 text-primary me-3 lh-0">
                                            <span class="path1"></span>
                                            <span class="path2"></span>
                                            <span class="path3"></span>
                                            <span class="path4"></span>
                                            <span class="path5"></span>
                                            <span class="path6"></span>
                                        </i>
                                        <h6 class="fw-bold m-0 text-gray-800">Matter Details</h6>
                                    </div>

                                    <div class="card-title d-flex align-items-right">
                                        <a id="initBtn" class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1">
                                            Inititialize
                                        </a>
                                    </div>
                                </h4>
                            </div>
                            <!--end::Header-->
                            <!--begin::Body-->
                            <div class="card-body pt-3">
                                <!--begin::Table container-->
                                <div class="table-responsive">
                                    <!--begin::Table-->
                                    <table id="example222" class="table table-striped- table-bordered table-hover table-checkable" style="width: 100%">
                                        <!--begin::Table head-->
                                        <!--end::Table head-->
                                        <!--begin::Table body-->
                                        <tbody>
                                            <tr>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">AccountNumber</span></th>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">@Model.Matter.AccountNumber</span></th>
                                            </tr>

                                            <tr>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">Description</span></th>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">@Model.Matter.Description</span></th>
                                            </tr>

                                            <tr>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">Type</span></th>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">@Model.Matter.Type</span></th>
                                            </tr>

                                            <tr>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">Status</span></th>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">@Model.Matter.Status</span></th>
                                            </tr>

                                            <tr>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">Participant</span></th>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">@Model.Matter.Participant</span></th>
                                            </tr>
                                            <tr>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">ClientEmail</span></th>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">@Model.Matter.ClientEmail</span></th>
                                            </tr>
                                            <tr>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">Createddate</span></th>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">@Model.Matter.Createddate</span></th>
                                            </tr>

                                            <tr>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">Modifieddate</span></th>
                                                <th class="text-start"><span class="text-muted fw-semibold text-muted d-block fs-7">@Model.Matter.Modifieddate</span></th>
                                            </tr>
                                        </tbody>
                                        <!--end::Table body-->
                                    </table>
                                    <!--end::Table-->

                                    <div>
                                        <h4 class="card-title align-items-start flex-column">
                                            <!--begin::Title-->
                                            <div class="card-title d-flex align-items-center">
                                                <i class="ki-duotone ki-calendar-8 fs-1 text-primary me-3 lh-0">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                    <span class="path3"></span>
                                                    <span class="path4"></span>
                                                    <span class="path5"></span>
                                                    <span class="path6"></span>
                                                </i>
                                                <h6 class="fw-bold m-0 text-gray-800">Document Details</h6>
                                            </div>                                           
                                        </h4>
                                    </div>

                                    <!--begin::Table-->
                                    <table id="example" class="table table-striped- table-bordered table-hover table-checkable" style="width: 100%">
                                        <!--begin::Table head-->
                                        <thead>
                                            <tr>
                                                <th class="text-end">Document</th>
                                                <th class="text-end">Status</th>
                                                <th class="text-end">ADV Percentage</th>
                                                <th class="text-end">Created Date</th>                                                
                                            </tr>
                                        </thead>
                                        <!--end::Table head-->
                                        <!--begin::Table body-->
                                        <tbody>
                                            @foreach (var item in @Model.DocumentList)
                                            {
                                                <tr>
                                                    <td>
                                                        <a href="#" class="text-gray-900 fw-bold text-hover-primary d-block mb-1 fs-6">@item.FileName</a>
                                                    </td>
                                                    <td class="text-end">
                                                        <a href="#" class="text-gray-900 fw-bold text-hover-primary d-block mb-1 fs-6">@item.Status</a>
                                                    </td>
                                                    <td class="text-end">
                                                        <a href="#" class="text-gray-900 fw-bold text-hover-primary d-block mb-1 fs-6">@item.ADVPercentage</a>
                                                    </td>
                                                    <td class="text-end">
                                                        <a href="#" class="text-gray-900 fw-bold text-hover-primary d-block mb-1 fs-6">@item.CreatedDate.ToString("dd MMMM yyyy")</a>
                                                    </td>                                                    
                                                </tr>
                                            }
                                        </tbody>
                                        <!--end::Table body-->
                                    </table>
                                    <!--end::Table-->

                                </div>
                                <!--end::Table container-->
                            </div>
                            <!--begin::Body-->
                        </div>
                        <!--end::Record-->
                    </div>
                </div>
                <!--end::Timeline-->
            </div>
            <!--end::Tab panel-->           
        </div>
        <!--end::Tab Content-->
    </div>
    <!--end::Card body-->
</div>
<!--end::Timeline-->
<!--end::Tables Widget 10-->
<script>
    $(document).ready(function () {
        $('#example').DataTable({
            "scrollX": true,
            "scrollY": true
        });
    });

    $(document).ready(function () {
        $('#example1').DataTable({
            "scrollX": true,
            "scrollY": true
        });
    });

    $(document).ready(function () {
        $('#example2').DataTable({
            "scrollX": true,
            "scrollY": true
        });
    });

    $(document).ready(function () {
        $('#example3').DataTable({
            "scrollX": true,
            "scrollY": true
        });
    });

    document.getElementById("initBtn").addEventListener("click", function (event) {

        const matterId = @Model.Matter.MatterId;

        fetch('/Home/Initialize', {

            method: 'POST',

            headers: {

                'Content-Type': 'application/json'

            },

            body: JSON.stringify({ matterId: matterId })

        })

    });

</script>